# Readme
## Personal offers service

### Description

Сервис, который будет рекомендовать нашим клиентам новые банковские продукты.
Через REST API сервиса, для каждого клиента будет возвращаться список рекомендуемых продуктов.
Содержит набор правил по которым будет производиться рекомендация.
Источником данных о клиенте служит база данных компании (только на чтение).

### How to use
#### Запрос:
GET
```url
http://localhost:8081/recommendation/f37ba8a8-3cd5-4976-9f74-2b21f105da67
```

#### Ответ:

200 OK Content-Type: application/json
```json
{
  "user_id": "f37ba8a8-3cd5-4976-9f74-2b21f105da67",
  "recommendations": [
    {
      "id": "59efc529-2fff-41af-baff-90ccd7402925",
      "name": "Top Saving",
      "text": "Откройте свою собственную «Копилку» с нашим банком!"
    }
  ]
}
```
или

```json
{
  "user_id": "f37ba8a8-3cd5-4976-9f74-2b21f105da68",
  "recommendations": []
}
```

### Offers implemented

##### Invest 500 [147f6a0f-3b91-413b-ab99-87f081d60d5a]
- Пользователь использует как минимум один продукт с типом DEBIT.
- Пользователь не использует продукты с типом INVEST.
- Сумма пополнений продуктов с типом SAVING больше 1000 ₽.

##### Top Saving [59efc529-2fff-41af-baff-90ccd7402925]
- Пользователь использует как минимум один продукт с типом DEBIT.
- Сумма пополнений по всем продуктам типа DEBIT больше или равна 50 000 ₽ ИЛИ Сумма пополнений по всем продуктам типа SAVING больше или равна 50 000 ₽.
- Сумма пополнений по всем продуктам типа DEBIT больше, чем сумма трат по всем продуктам типа DEBIT.

##### Простой кредит [ab138afb-f3ba-4a93-b74f-0fcee86d447f]
- Пользователь не использует продукты с типом CREDIT.
- Сумма пополнений по всем продуктам типа DEBIT больше, чем сумма трат по всем продуктам типа DEBIT.
- Сумма трат по всем продуктам типа DEBIT больше, чем 100 000 ₽.


### Setup
Типовое приложение на базе Spring Boot. 
Сборка проекта осуществляется с помощью Maven.

`mvnw package`
(Это полностью соберет проект в JAR-файл. Тогда бин BuildInfo будет доступен вашему приложению)

В конфигурации по умолчанию:
Запускается на порте 8081.
В качестве источника данных используется локальная база данных, файл должен располагаться src/main/resources/db/data/transaction.mv.db (поставляется отдельно).

При запуске приложения в консоль выводится информация о статусе подключения к базе данных. (DatabaseChecker)
