# API Документация

## Доступ к Swagger UI

Swagger UI доступен по следующему адресу после запуска приложения:

```
http://localhost:8080/swagger-ui.html
```

## Доступ к OpenAPI спецификации

Полная спецификация OpenAPI доступна в формате JSON:

```
http://localhost:8080/v3/api-docs
```

Или в формате YAML:

```
http://localhost:8080/v3/api-docs.yaml
```

## Описание API

### Основные эндпоинты

#### Получение рекомендаций
- **Метод:** GET
- **Путь:** `/recommendation/{userId}`
- **Описание:** Возвращает персонализированные рекомендации для пользователя
- **Параметры:**
  - `userId` - UUID пользователя (в пути)

#### Управление правилами
- **Метод:** GET, POST, DELETE
- **Путь:** `/rules`
- **Описание:** Получение, создание и удаление динамических правил формирования офферов

#### Статистика правил
- **Метод:** GET
- **Путь:** `/rules/stats`
- **Описание:** Получение статистики по показам правил

#### Управление приложением
- **Метод:** POST
- **Путь:** `/management/clear-caches`
- **Описание:** Очистка всех кешей приложения

- **Метод:** GET
- **Путь:** `/management/info`
- **Описание:** Получение информации о сервисе

## Требования для работы

1. Java 17
2. Spring Boot 4.0.0
3. Добавлена зависимость springdoc-openapi-starter-webmvc-ui версии 2.0.2

## Генерация документации

Документация генерируется автоматически с помощью SpringDoc OpenAPI. Файлы конфигурации расположены в:

- `src/main/resources/api/openapi.yaml` - базовая спецификация OpenAPI
- `src/main/resources/api/swagger-config.yaml` - конфигурация Swagger UI

## Интеграция с проектом

1. Добавлена зависимость springdoc в `pom.xml`
2. Созданы файлы конфигурации в ресурсах
3. Документация автоматически генерируется при запуске приложения

## Поддержка

Для обновления документации при изменении API:

1. Обновите аннотации в контроллерах
2. Перезапустите приложение
3. Проверьте актуальность документации в Swagger UI